:root{
  --bg:#0b0f17; --card-bg:#111827; --ink:#e5e7eb; --muted:#9ca3af; --accent:#a78bfa;
  --radius:16px; --shadow:0 8px 30px rgba(0,0,0,.35);
  --ar-w:55; --ar-h:83; /* 画像比率 55:83 */
}

*{box-sizing:border-box}
body{
  margin:0; background:radial-gradient(1200px 700px at 70% -10%, #1f2937 0%, var(--bg) 60%);
  color:var(--ink); font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans JP,Arial;
  display:flex; flex-direction:column; align-items:center; padding:20px 10px 60px;
}
header{text-align:center; margin-bottom:16px;}
header h1{margin:0 0 6px; font-size:clamp(20px,3.2vw,34px)}
header p{margin:0; color:var(--muted); font-size:clamp(12px,1.8vw,14px)}

.set{ width:100%; border-top:1px solid rgba(255,255,255,.06); padding-top:16px; margin-top:16px; }
.set:first-of-type{border-top:none; padding-top:0; margin-top:0;}

/* 一覧：PC80% / タブレット以下90%（スマホ含む） */
.section{ width:80%; max-width:1400px; margin:14px auto 22px; }
.section h2{ margin:0 0 8px; font-size:clamp(18px,2.6vw,24px); letter-spacing:.02em; }
.grid{ display:grid; grid-template-columns: repeat(3, 1fr); gap:16px; }

.thumb{ background:var(--card-bg); border-radius:12px; box-shadow:var(--shadow); overflow:hidden; cursor:pointer; position:relative }
.frame{ position:relative; width:100%; aspect-ratio: var(--ar-w) / var(--ar-h); }
.frame img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block }
.thumb .title{ font-size:12px; color:var(--muted); padding:6px 6px; border-top:1px solid rgba(255,255,255,.07) }

/* 詳細ビュー（モーダル） */
.viewer{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,.55);
  padding:max(6px, env(safe-area-inset-top)) 6px max(6px, env(safe-area-inset-bottom)) 6px;
  z-index:50
}
.viewer.open{ display:flex }
.dialog{
  background: var(--card-bg);
  border-radius: 16px;
  box-shadow: var(--shadow);
  max-width: min(900px, 92vw);
  width: 100%;
  max-height: 96svh;
  height: auto;
  display: grid;
  grid-template-rows: auto 1fr auto;
  overflow: hidden;
}
.dialog header{ display:flex; align-items:center; justify-content:space-between; padding:8px 12px; border-bottom:1px solid rgba(255,255,255,.07) }
.dialog header h3{ margin:0; font-size:16px }
.actions{ display:flex; gap:8px; }
.btn{
  background:transparent; border:1px solid rgba(255,255,255,.25); color:#fff;
  border-radius:8px; padding:6px 10px; cursor:pointer
}

/* 画像（フェードで表裏切替、比率維持） */
.content{ display:grid; grid-template-columns:1fr; gap:0; overflow:auto; -webkit-overflow-scrolling:touch }
.img-wrap{
  position:relative; width:auto; margin:0 auto;
  aspect-ratio: var(--ar-w) / var(--ar-h);
  max-width:92vw; /* 画面幅いっぱいにしない */
}
.img-wrap img{
  position:absolute; inset:0; width:100%; height:100%; object-fit:contain;
  transition:opacity .25s ease;
}
.img-wrap .back{ opacity:0 }
.dialog.is-back .img-wrap .front{ opacity:0 }
.dialog.is-back .img-wrap .back{ opacity:1 }

/* 情報パネル */
.panel{ padding:12px; border-top:1px solid rgba(255,255,255,.07); background:rgba(255,255,255,.04) }
.panel .meta-title{ font-weight:700; margin:0 0 8px }
.stats{ display:grid; grid-template-columns:1fr 1fr; gap:8px; font-size:13px }
.stat{ background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.07); border-radius:8px; padding:6px }
.stat .k{ color:var(--muted); font-size:11px }
.stat .v{ font-size:13px }

/* SNSボタン */
.sns-links{
  display:flex; gap:10px; margin-top:12px; justify-content:flex-end; align-items:center;
}
.sns-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:38px; height:38px; border-radius:50%;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.15);
  transition: transform .08s ease, background .2s ease, border-color .2s ease;
}
.sns-btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.18); border-color: rgba(255,255,255,.35); }
.sns-btn.disabled{ opacity:.4; pointer-events:none; }
.sns-btn img{ width:20px; height:20px; display:block; }

.hint{ text-align:center; color:var(--muted); font-size:12px; padding:6px 0 10px }

/* タブレット以下は90%幅に、余白を少し詰める */
@media (max-width: 1024px){
  .section{ width:90%; max-width:none; }
  .grid{ gap:10px; }
}

/* スマホ（3カラム維持）。画像はパネル分の高さを確保して見切れ防止 */
@media (max-width: 480px){
  body{ padding:10px 4px 36px }
  .grid{ gap:6px }
  .section{ margin:8px auto 16px }
  .thumb .title{ font-size:11px; padding:5px }
  .dialog{ max-width:100vw; max-height:100svh; border-radius:12px }
  .img-wrap{
    height: calc(100svh - 48px /*header*/ - 22px /*hint*/ - 16px /*余白*/ - 208px /*panel*/);
  }
  .panel{ padding:10px; }
}

/* 背景スクロール抑止（モーダル時） */
body.no-scroll{ overflow:hidden; touch-action:none; }
