:root{
  --card-bg:#ffffff;
  --text:#333;
  --shadow:0 4px 12px rgba(0,0,0,.2);
  --ar-w:55; /* 55:83 の比率 */
  --ar-h:83;
}

/* Base */
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans JP,Arial;
  color:var(--text);
  background:#f4f4f4;
}
.site-header{
  text-align:center;
  padding:16px 10px 8px;
}
.site-header h1{ margin:0 0 6px; }
.site-header p{ margin:0; color:#666; font-size:.95rem; }

/* Section / Grid */
.section{
  width:80%;
  max-width:1400px;
  margin:14px auto 22px;
}
@media (max-width:1024px){
  .section{ width:90%; max-width:none; }
}
.section h2{
  margin:12px 0 8px;
  font-size:1.3rem;
}
.grid{
  display:grid;
  grid-template-columns:repeat(3, 1fr); /* モバイルもPCも3カラム固定 */
  gap:16px;
}
.thumb img{
  width:100%;
  height:auto;
  object-fit:contain;
  border-radius:8px;
  box-shadow:var(--shadow);
  cursor:pointer;
}

/* Viewer (Modal) */
.viewer{
  position:fixed;
  inset:0;
  width:100%; height:100%;
  background:rgba(0,0,0,.7);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.hidden{ display:none !important; }

.dialog{
  background:var(--card-bg);
  border-radius:16px;
  box-shadow:var(--shadow);
  max-width:min(900px,92vw);
  width:100%;
  max-height:96svh;
  padding:12px;
  position:relative;
  display:flex;
  flex-direction:column; /* mobile default */
  gap:12px;
  overflow:hidden;
}
@media (min-width:768px){
  .dialog{
    display:grid;
    grid-template-columns:auto 1fr; /* 左カード／右情報 */
    align-items:center;
    gap:16px;
  }
}

/* Card (3D flip) */
.card-inner{
  position:relative;
  transform-style:preserve-3d;
  transition:transform .6s;
  aspect-ratio:var(--ar-w) / var(--ar-h);
  width:min(440px, 46vw); /* PCで確実に表示させる幅 */
  height:auto;
  margin:0 auto;
  cursor:pointer;
}
@media (max-width:480px){
  .card-inner{ width:92vw; } /* モバイルは画面幅にフィット（比率維持） */
}
.face{
  position:absolute;
  inset:0;
  backface-visibility:hidden;
}
.face img{
  width:100%; height:100%;
  object-fit:contain;
  border-radius:8px;
}
.back{ transform:rotateY(180deg); }
.card-inner.flipped{ transform:rotateY(180deg); }

/* Panel */
.panel{
  padding:10px;
  text-align:left;
}
.panel h3{ margin:.2rem 0 .6rem; }

/* 情報テーブル */
.info-table{
  width:100%;
  border-collapse:collapse;
  margin:6px 0 8px;
  font-size:.95rem;
}
.info-table th,
.info-table td{
  border-top:1px solid rgba(0,0,0,.08);
  padding:8px 6px;
  text-align:left;
  vertical-align:top;
}
.info-table th{
  width:7em;
  color:#555;
  font-weight:600;
}
.info-table tr:first-child th,
.info-table tr:first-child td{
  border-top:none;
}

/* SNS Buttons */
.sns-links{
  display:flex;
  align-items:center;
  gap:12px;
  margin-top:10px;
}
.sns-links img{
  width:32px; height:32px; display:block; object-fit:contain;
}
.sns-links a.disabled{ opacity:.45; pointer-events:none; }

/* Close button */
#closeViewer{
  position:absolute;
  top:6px; right:10px;
  background:none;
  border:none;
  font-size:1.6rem;
  color:#333;
  cursor:pointer;
}

/* Mobile tweaks */
@media (max-width:480px){
  body{ padding:10px 4px 36px; }
  .grid{ gap:6px; }            /* 3カラム維持、隙間だけ詰める */
  .section{ margin:8px auto 16px; }
  .thumb img{ border-radius:6px; }
  .dialog{
    max-width:100vw;
    max-height:100svh;
    border-radius:12px;
    padding:8px;
    gap:8px;
  }
  .panel{ padding:8px; }
  .sns-links img{ width:28px; height:28px; }
}

/* ========== Mobile modal fixes ========== */
@media (max-width: 480px){
  /* モーダルの余白＆配置を少し上寄せにして全体を小さめ表示 */
  .viewer{
    align-items: flex-start;
    padding-top: 8px;
  }
  .dialog{
    padding: 8px;
    gap: 8px;
    border-radius: 12px;
    max-width: 100vw;
    max-height: 100svh;
    /* カード → 情報 → 余白 の順で縦積み */
    display: grid;
    grid-template-rows: auto 1fr;
  }

  /* カード自体を小さめに（比率は維持） */
  .card-inner{
    width: 84vw;           /* ← ここで全体縮小感を調整（80〜90vwで好みへ） */
    margin: 0 auto;
  }

  /* 情報パネルはスクロール可。下部のSNSが見切れないよう高さ制御 */
  .panel{
    padding: 8px;
    max-height: 40svh;     /* ← パネルが高すぎないように制限 */
    overflow: auto;
  }

  /* SNSリンクを常に見やすく（パネル最下部に張り付き気味） */
  .sns-links{
    position: sticky;
    bottom: 0;
    background: linear-gradient(to top, rgba(255,255,255,.96), rgba(255,255,255,.88) 60%, transparent);
    padding-top: 8px;
    margin-top: 8px;
    justify-content: center;
    gap: 12px;
  }
  .sns-links img{
    width: 28px; height: 28px;
  }

  /* 閉じるボタンを常に見える場所へ＆見やすい見た目に */
  #closeViewer{
    position: fixed;       /* ← 固定配置で常に見える */
    top: 10px; right: 12px;
    z-index: 1000;
    width: 36px; height: 36px;
    background: rgba(0,0,0,.65);
    color: #fff;
    border: none;
    border-radius: 10px;
    font-size: 1.2rem;
    line-height: 1;
  }
}
